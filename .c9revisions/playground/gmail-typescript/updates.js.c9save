{"ts":1349340322268,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var __extends = this.__extends || function (d, b) {\r\n    function __() { this.constructor = d; }\r\n    __.prototype = b.prototype;\r\n    d.prototype = new __();\r\n}\r\nvar flow = require(\"./flow\")\r\nvar a_def = flow.define;\r\nvar ex = flow.exec;\r\nvar settings = require('../../settings')\r\n\r\nvar ImapConnection = imap.ImapConnection;\r\n\r\n\r\n\r\n\r\nvar prop = jsprops.property;\r\n\r\nconnection = new ImapConnection({\r\n    username: settings.gmail_username,\r\n    password: settings.gmail_password,\r\n    host: settings.gmail_host || \"imap.gmail.com\",\r\n    port: 993,\r\n    secure: true\r\n});\r\nvar BaseClass = (function () {\r\n    function BaseClass() { }\r\n    BaseClass.prototype.repl = function () {\r\n        repl.start({\r\n            prompt: \"repl> \",\r\n            input: process.stdin,\r\n            output: process.stdout\r\n        }).context = {\r\n            foo: this\r\n        };\r\n    };\r\n    BaseClass.prototype.log = function () {\r\n        console.log.apply(arguments);\r\n    };\r\n    return BaseClass;\r\n})();\r\nObject.merge(settings, {\r\n    gmail_max_results: 300\r\n});\r\nvar Channel = (function () {\r\n    function Channel(manager, name) {\r\n        if (typeof name === \"undefined\") { name = \"noname\"; }\r\n        this.manager = manager;\r\n        this.name = name;\r\n        this.active = true;\r\n        this.last_update = 0;\r\n        this.update_interval = 10 * 1000;\r\n        this.cmd = prop('cmd');\r\n    }\r\n    Channel.prototype.connection = function () {\r\n        this.queue().push(Promise.defer());\r\n        this.queue()[-1];\r\n    };\r\n    return Channel;\r\n})();\r\nvar GmailManager = (function () {\r\n    function GmailManager() { }\r\n    return GmailManager;\r\n})();\r\nvar Gmail = (function (_super) {\r\n    __extends(Gmail, _super);\r\n    function Gmail() {\r\n        _super.apply(this, arguments);\r\n\r\n    }\r\n    return Gmail;\r\n})(BaseClass);\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1822}]],"length":1822}
